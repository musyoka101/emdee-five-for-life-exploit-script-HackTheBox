import requests
import re
import hashlib

# Colors to make it look pretty
class bcolors:
    OKGREEN = '\033[92m'
    OKBLUE = '\033[94m'
    FAIL = '\033[91m'
    LIGHTGREY='\033[37m'
    ENDC = '\033[0m'
banner = """ __  __ ____  ____    _____                             _             
|  \/  |  _ \| ___|  | ____|_ __   ___ _ __ _   _ _ __ | |_ ___  _ __ 
| |\/| | | | |___ \  |  _| | '_ \ / __| '__| | | | '_ \| __/ _ \| '__|
| |  | | |_| |___) | | |___| | | | (__| |  | |_| | |_) | || (_) | |   
|_|  |_|____/|____/  |_____|_| |_|\___|_|   \__, | .__/ \__\___/|_|   
                                            |___/|_|                  

"""
print (bcolors.OKBLUE + banner + bcolors.ENDC)

my_url = raw_input(bcolors.LIGHTGREY + "Please Insert The URL: " + bcolors.ENDC)

# using sessions so that i can keep my session cookies
s = requests.Session()

url = my_url 

first_url = s.get(url).text
#doing a search using HTML Tags to determine the exact postion of the string to hash
find1 = first_url.find("</h1><h3")
find2 = first_url.find("</h3>")
md5 = first_url[find1 : find2]
md5_raw = re.sub("</h1><h3 align='center'>","", md5, 1)

print (bcolors.OKGREEN + "This is the string you are supposed to MD5 encypt: " + md5_raw + bcolors.ENDC)

# MD5summing the string 

encrypted = hashlib.md5(md5_raw).hexdigest()

print (bcolors.OKGREEN + "This is the encrypted sample Submitting it shortly: " + encrypted + bcolors.ENDC)

# declaring the post data parameters

post_data = {

    "hash" : encrypted
            }

second_url = s.post(url, data = post_data).text

find3 = second_url.find("</h3>")
find4 = second_url.find("</p><center>")

flag_raw = second_url[find3 : find4]

flag = re.sub("</h3><p align='center'>", "", flag_raw, 1)
print
print ("Here's your Flag Submit to get the points: " + bcolors.FAIL +  flag)
print



